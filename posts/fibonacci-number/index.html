<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Computing Fibonacci numbers.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fibonacci Number | Algorithmic Toolbox</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://github.com/necromuralist/algorithmic_toolbox/posts/fibonacci-number/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML" async></script><meta name="author" content="Cloistered Monkey">
<link rel="prev" href="../maximum-pairwise-product/" title="Maximum Pairwise Product" type="text/html">
<link rel="next" href="../last-digit-of-a-large-fibonacci-number/" title="Last Digit of a Large Fibonacci Number" type="text/html">
<meta property="og:site_name" content="Algorithmic Toolbox">
<meta property="og:title" content="Fibonacci Number">
<meta property="og:url" content="https://github.com/necromuralist/algorithmic_toolbox/posts/fibonacci-number/">
<meta property="og:description" content="Computing Fibonacci numbers.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-06-24T20:49:54-07:00">
<meta property="article:tag" content="algorithms problem">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-default navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://github.com/necromuralist/algorithmic_toolbox/">

                <span id="blog-title">Algorithmic Toolbox</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>
            </li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="../../machine-learning-projects/">Machine Learning</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/p5_explorations/">P5 Explorations</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/tddmachinelearning/">TDD Machine Learning</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/student_intervention/">Student Intervention Project</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/boston_housing/">Boston Housing Project</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/data_science/">Data Science With Python</a>
            </li>
</ul>
</li>
</ul>
<!-- Google custom search --><form method="get" action="https://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
<input type="hidden" name="sitesearch" value="https://github.com/necromuralist/algorithmic_toolbox/">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.org" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Fibonacci Number</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2018-06-24T20:49:54-07:00" itemprop="datePublished" title="2018-06-24 20:49">2018-06-24 20:49</time></a></p>
            
        <p class="sourceline"><a href="index.org" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div id="outline-container-orgbe1545a" class="outline-2">
<h2 id="orgbe1545a">Imports</h2>
<div class="outline-text-2" id="text-orgbe1545a">
<div class="highlight"><pre><span></span><span class="c1"># python standard library</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">datetime</span><span class="p">,</span>
    <span class="n">timedelta</span><span class="p">,</span>
    <span class="p">)</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># third party</span>
<span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Memory</span>
</pre></div>
</div>
</div>
<div id="outline-container-org3939bc5" class="outline-2">
<h2 id="org3939bc5">The Fibonacci Problem</h2>
<div class="outline-text-2" id="text-org3939bc5">
<p>
THe Fibonacci Sequence is defined as
</p>

<p>
\[F_0 = 0, F_1 = 1,\ldots, F_i =F_{i-1} + F_{i-2} \text{ for } i \ge 2\]
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Â </th>
<th scope="col" class="org-left">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><b>Task</b></td>
<td class="org-left">Given an integer <i>n</i>, find the /n/th Fibonacci number \(F_n\).</td>
</tr>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">A single integer <i>n</i>.</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(0 \le n \le 45\)</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">\(F_n\)</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-orga99bdff" class="outline-3">
<h3 id="orga99bdff">Sample Values</h3>
<div class="outline-text-3" id="text-orga99bdff">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-right">
<col class="org-right">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-right">Input</th>
<th scope="col" class="org-right">Output</th>
<th scope="col" class="org-left">Meaning</th>
</tr></thead>
<tbody><tr>
<td class="org-right">10</td>
<td class="org-right">55</td>
<td class="org-left">\(F_10=55\)</td>
</tr></tbody>
</table>
</div>
</div>

<div id="outline-container-orgb3c0b6f" class="outline-3">
<h3 id="orgb3c0b6f">Constants</h3>
<div class="outline-text-3" id="text-orgb3c0b6f">
<p>
These are translations from the problem description
</p>
<div class="highlight"><pre><span></span><span class="n">MAX_TIME</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">MAX_INPUT</span> <span class="o">=</span> <span class="mi">45</span>
</pre></div>
</div>
</div>
</div>
<div id="outline-container-orgc34c649" class="outline-2">
<h2 id="orgc34c649">Helpers</h2>
<div class="outline-text-2" id="text-orgc34c649">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">time_it</span><span class="p">(</span><span class="n">implementation</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">input_value</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">max_time</span><span class="o">=</span><span class="n">MAX_TIME</span><span class="p">):</span>
    <span class="sd">"""Times the implementation</span>

<span class="sd">    Args: </span>
<span class="sd">     implementation: callable to pass input_value to</span>
<span class="sd">     tag (str): identifier to add to the output</span>
<span class="sd">     input_value (int): the number to pass to the implementation</span>
<span class="sd">     expected (int): the expected value</span>
<span class="sd">     max_time (float): number of seconds allowed</span>

<span class="sd">    Raises:</span>
<span class="sd">	AssertionError: wrong value or took too long</span>
<span class="sd">    """</span>
    <span class="k">assert</span> <span class="n">input_value</span> <span class="o">&lt;=</span> <span class="n">MAX_INPUT</span><span class="p">,</span> <span class="s2">"n too large: {}, max allowed: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">input_value</span><span class="p">,</span>
									       <span class="n">MAX_INPUT</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Starting {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">implementation</span><span class="p">(</span><span class="n">input_value</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> <span class="s2">"Actual: {} Expected: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
	    <span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"({}) Okay Elapsed time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">elapsed</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">elapsed</span> <span class="o">&lt;=</span> <span class="n">max_time</span><span class="p">,</span> <span class="s2">"Time Greater than {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">max_time</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgcb29cca" class="outline-2">
<h2 id="orgcb29cca">Naive Implementation</h2>
<div class="outline-text-2" id="text-orgcb29cca">
<p>
The 'naive' implementation uses recursion to calculate a fibonacci number.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">"""Calculates the nth fibonacci number</span>

<span class="sd">    Args:</span>
<span class="sd">     n (int): the fibonacci number to get (e.g. 3 means third)</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: nth fibonacci number</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
	    <span class="o">+</span> <span class="n">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_it</span><span class="p">(</span><span class="n">calculate_fibonacci_recursive</span><span class="p">,</span> <span class="s2">"Recursive"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span>
</pre></div>

<p>
This fails the grader (as expected).
</p>

<pre class="example">
Failed case #37/46: time limit exceeded 
Input: 36 
Your output: 14930352 
stderr: (Time used: 5.63/5.00, memory used: 9613312/536870912.)
</pre>
</div>
</div>

<div id="outline-container-orgcad7afa" class="outline-2">
<h2 id="orgcad7afa">The Tester</h2>
<div class="outline-text-2" id="text-orgcad7afa">
<p>
We have kind of a chicken and the egg problem here. We know that the recursive version is correct, but it is too slow. But in order to validate our newer versions, we need to run it to check for correctness. To solve this problem I'm going to use a cache.
</p>

<div class="highlight"><pre><span></span><span class="n">memory</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s2">"memories"</span><span class="p">)</span>

<span class="nd">@memory.cache</span>
<span class="k">def</span> <span class="nf">reference_implementation</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">"""Calculates the nth fibonacci number</span>

<span class="sd">    Args:</span>
<span class="sd">     n (int): the fibonacci number to get (e.g. 3 means third)</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: nth fibonacci number</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
	    <span class="o">+</span> <span class="n">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">time_once</span><span class="p">(</span><span class="n">implementation</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">"""Runs the implementation once</span>

<span class="sd">    Args:</span>
<span class="sd">     implementation: callable to pass input</span>
<span class="sd">     n: value to pass to the implementation</span>

<span class="sd">    Returns:</span>
<span class="sd">     output of implementation</span>
<span class="sd">    """</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">implementation</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Elapsed: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">output</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run_range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">"""run the reference implementation n times</span>

<span class="sd">    Args:</span>
<span class="sd">     n (int): number of times to run the reference implementation</span>
<span class="sd">    """</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">input_value</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="n">output</span> <span class="o">=</span> <span class="n">reference_implementation</span><span class="p">(</span><span class="n">input_value</span><span class="p">)</span>
    <span class="k">return</span> 
</pre></div>

<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">endpoint</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">MAX_INPUT</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"endpoint: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">endpoint</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">endpoint</span><span class="p">):</span>
	<span class="n">run_range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_once</span><span class="p">(</span><span class="n">reference_implementation</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
</pre></div>

<p>
In case I accidentally re-run that last call and it uses the cache I'll note here that the original run time was 8 minutes and 40 seconds.
</p>

<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Tester</span><span class="p">:</span>
    <span class="sd">"""Class to test the implementation</span>

<span class="sd">    Args: </span>
<span class="sd">     implementation: callable to pass input_value to</span>
<span class="sd">     tag (str): identifier to add to the output</span>
<span class="sd">     iterations (int): number of times to run the testing</span>
<span class="sd">     verbose (bool): if true, emit more text</span>
<span class="sd">     max_time (float): number of seconds allowed</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">implementation</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">iterations</span><span class="p">,</span>
		 <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
		 <span class="n">max_time</span><span class="o">=</span><span class="n">MAX_TIME</span><span class="p">):</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">implementation</span> <span class="o">=</span> <span class="n">implementation</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">max_time</span> <span class="o">=</span> <span class="n">max_time</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="n">iterations</span>
	<span class="k">return</span>

    <span class="k">def</span> <span class="nf">output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">statement</span><span class="p">):</span>
	<span class="sd">"""prints the statement if verbose is on"""</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
	    <span class="k">print</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">time_it</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_value</span><span class="p">):</span>
	<span class="sd">"""Times the implementation</span>

<span class="sd">	.. warning:: This uses the ``reference_implementation`` to get the</span>
<span class="sd">	   expected value. Make sure it's implemented and the values are cached</span>

<span class="sd">	Args:</span>
<span class="sd">	 input_value (int): input for the implementation</span>
<span class="sd">	Raises:</span>
<span class="sd">	 AssertionError: wrong value or took too long</span>
<span class="sd">	"""</span>
	<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">"Starting {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">))</span>
	<span class="n">expected</span> <span class="o">=</span> <span class="n">reference_implementation</span><span class="p">(</span><span class="n">input_value</span><span class="p">)</span>
	<span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="p">(</span><span class="n">input_value</span><span class="p">)</span>
	<span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> <span class="s2">"n: {} Actual: {} Expected: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
	    <span class="n">input_value</span><span class="p">,</span> <span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
	<span class="n">elapsed</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">"({}) Okay Elapsed time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">elapsed</span><span class="p">))</span>
	<span class="k">assert</span> <span class="n">elapsed</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_time</span><span class="p">,</span> <span class="s2">"Time Greater than {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_time</span><span class="p">)</span>
	<span class="k">return</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="sd">"""Generates random numbers and times it"""</span>
	<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"***** {} *****"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">))</span>
	<span class="k">for</span> <span class="n">iteration</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iterations</span><span class="p">):</span>
	    <span class="n">n</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="n">MAX_INPUT</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
	    <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">"n: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
	    <span class="bp">self</span><span class="o">.</span><span class="n">time_it</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Total Elapsed: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()))</span>
	<span class="k">return</span>            
</pre></div>
</div>
</div>

<div id="outline-container-org709e579" class="outline-2">
<h2 id="org709e579">An Iterative Version</h2>
<div class="outline-text-2" id="text-org709e579">
<p>
To try and speed things up I'm going to use an iterative version instead of a recursive one.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fibonacci_iterative</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">"""Calculates the nth fibonacci number</span>

<span class="sd">    Args:</span>
<span class="sd">     n (int): the fibonacci number to get (e.g. 3 means third)</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: nth fibonacci number</span>
<span class="sd">    """</span>
    <span class="n">first</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">first</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">n</span>
    <span class="n">previous</span><span class="p">,</span> <span class="n">current</span> <span class="o">=</span> <span class="n">first</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	<span class="n">previous</span><span class="p">,</span> <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="p">,</span> <span class="n">previous</span> <span class="o">+</span> <span class="n">current</span>
    <span class="k">return</span> <span class="n">current</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">test</span> <span class="o">=</span> <span class="n">Tester</span><span class="p">(</span><span class="n">fibonacci_iterative</span><span class="p">,</span> <span class="s2">"Iterative"</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">test</span><span class="p">()</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">f_0</span> <span class="o">=</span> <span class="n">fibonacci_iterative</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="n">f_1</span> <span class="o">=</span> <span class="n">reference_implementation</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">f_0</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">f_1</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">f_0</span> <span class="o">==</span> <span class="n">f_1</span>
</pre></div>

<p>
This passes the grader.
</p>

<pre class="example">
Good job! (Max time used: 0.03/5.00, max memory used: 9637888/536870912.)
</pre>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/algorithms-problem/" rel="tag">algorithms problem</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../maximum-pairwise-product/" rel="prev" title="Maximum Pairwise Product">Previous post</a>
            </li>
            <li class="next">
                <a href="../last-digit-of-a-large-fibonacci-number/" rel="next" title="Last Digit of a Large Fibonacci Number">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents Â© 2018         <a href="mailto:necromuralist@protonmail.com">Cloistered Monkey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
