<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Notes as I study algorithms and data structures.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Algorithmic Toolbox</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://github.com/necromuralist/algorithmic_toolbox/">
<link rel="next" href="index-1.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML" async></script><link rel="prefetch" href="posts/binary-search/" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-default navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://github.com/necromuralist/algorithmic_toolbox/">

                <span id="blog-title">Algorithmic Toolbox</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS feed</a>
            </li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="machine-learning-projects/">Machine Learning</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/p5_explorations/">P5 Explorations</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/tddmachinelearning/">TDD Machine Learning</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/student_intervention/">Student Intervention Project</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/boston_housing/">Boston Housing Project</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/data_science/">Data Science With Python</a>
            </li>
</ul>
</li>
</ul>
<!-- Google custom search --><form method="get" action="https://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
<input type="hidden" name="sitesearch" value="https://github.com/necromuralist/algorithmic_toolbox/">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/binary-search/" class="u-url">Binary Search</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/binary-search/" rel="bookmark"><time class="published dt-published" datetime="2018-07-04T17:28:44-07:00" title="2018-07-04 17:28">2018-07-04 17:28</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-orgcb292da" class="outline-2">
<h2 id="orgcb292da">Binary Search</h2>
<div class="outline-text-2" id="text-orgcb292da">
<p>
Binary search takes a sorted array and repeatedly divides it in half, checking whether an item searched for is at the mid-point. If you were to just traverse the array, you would have a runtime of \(O(n)\). But because you are using divide and conquer (repeatedly halving to reduce the search space), you have a runtime of \(O(\log n)\). 
</p>
</div>
</div>
<div id="outline-container-org09a92f3" class="outline-2">
<h2 id="org09a92f3">Imports</h2>
<div class="outline-text-2" id="text-org09a92f3">
<div class="highlight"><pre><span></span><span class="c1"># python standard library</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">log</span>

<span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">equal</span><span class="p">,</span>
    <span class="n">expect</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div id="outline-container-org1334fdf" class="outline-2">
<h2 id="org1334fdf">Constants</h2>
<div class="outline-text-2" id="text-org1334fdf">
<div class="highlight"><pre><span></span><span class="n">NOT_FOUND</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgeba8dbe" class="outline-2">
<h2 id="orgeba8dbe">Linear Search</h2>
<div class="outline-text-2" id="text-orgeba8dbe">
<p>
The naive way is to just traverse the list.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">linear_search</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">"""Brute-force search</span>

<span class="sd">    Args:</span>
<span class="sd">     a (list): source to search</span>
<span class="sd">     x : Item to search for</span>
<span class="sd">     verbose (bool): Emit number of loops</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: index of x in a or -1 if not found</span>
<span class="sd">    """</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
	<span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
	    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
	    <span class="k">print</span><span class="p">(</span><span class="s2">"Loop {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">counter</span><span class="p">))</span>
	<span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span><span class="p">:</span>
	    <span class="k">return</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">NOT_FOUND</span>
</pre></div>

<p>
Interestingly, if you submit this it will time out.
</p>

<pre class="example">
Failed case #32/36: time limit exceeded (Time used: 9.98/5.00, memory used: 40480768/536870912.)
</pre>
</div>
</div>

<div id="outline-container-org8b5a42a" class="outline-2">
<h2 id="org8b5a42a">The Algorithm</h2>
<div class="outline-text-2" id="text-org8b5a42a">
<p>
This is given as part of the problem statement.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">binary_search</span><span class="p">(</span><span class="n">K</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">"""Finds the index of an item in the list</span>

<span class="sd">    Args:</span>
<span class="sd">     K (list): A sorted list of integers</span>
<span class="sd">     q (int): the item to search for</span>
<span class="sd">     verbose (bool): if true, emit the number of loops done</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: index of q in K or -1 if not found</span>
<span class="sd">    """</span>
    <span class="n">min_index</span><span class="p">,</span> <span class="n">max_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">K</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">max_index</span> <span class="o">&gt;=</span> <span class="n">min_index</span><span class="p">:</span>
	<span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
	    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
	    <span class="k">print</span><span class="p">(</span><span class="s2">"In loop {} - {}:{}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">min_index</span><span class="p">,</span> <span class="n">max_index</span><span class="p">))</span>

	<span class="n">mid_index</span> <span class="o">=</span> <span class="p">(</span><span class="n">min_index</span> <span class="o">+</span> <span class="n">max_index</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>

	<span class="k">if</span> <span class="n">K</span><span class="p">[</span><span class="n">mid_index</span><span class="p">]</span> <span class="o">==</span> <span class="n">q</span><span class="p">:</span>
	    <span class="k">return</span> <span class="n">mid_index</span>
	<span class="k">elif</span> <span class="n">K</span><span class="p">[</span><span class="n">mid_index</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">q</span><span class="p">:</span>
	    <span class="n">min_index</span> <span class="o">=</span> <span class="n">mid_index</span> <span class="o">+</span> <span class="mi">1</span>
	<span class="k">else</span><span class="p">:</span>
	    <span class="n">max_index</span> <span class="o">=</span> <span class="n">mid_index</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">NOT_FOUND</span>
</pre></div>
</div>

<div id="outline-container-org87d2424" class="outline-3">
<h3 id="org87d2424">Testing</h3>
<div class="outline-text-3" id="text-org87d2424">
<div class="highlight"><pre><span></span><span class="n">q</span> <span class="o">=</span> <span class="mi">9</span>
<span class="n">K</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="n">expected</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">binary_search</span><span class="p">(</span><span class="n">K</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">expected</span><span class="p">))</span>
</pre></div>

<p>
Looking at the output you can see that after finding that the middle element didn't match <i>q</i> it searched the upper half of the list (by raising the Minimum Index to 4) and then found <i>q</i> at the point where the Minimum and Maximum Index were equal.
</p>

<p>
We can compare this to the linear search.
</p>

<div class="highlight"><pre><span></span><span class="n">actual</span> <span class="o">=</span> <span class="n">linear_search</span><span class="p">(</span><span class="n">K</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">expected</span><span class="p">))</span>
</pre></div>

<p>
It works but it takes a little longer. You can see the theoretical (Big-O) runtimes are different as well.
</p>

<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s2">"O(n): {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">K</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">"O(log n): {:.2f}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">K</span><span class="p">),</span> <span class="mi">2</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>

<div id="outline-container-org0bc658e" class="outline-2">
<h2 id="org0bc658e">Sorted Array Multiple Search Problem</h2>
<div class="outline-text-2" id="text-org0bc658e">
<p>
Because you need at least a linear runtime to read in the inputs, the grader can't tell that our search took less time than it took to read in the list. Because of this they set up a slightly harder problem to solve which can be graded.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>Problem</b></td>
<td class="org-left"><i>Search multiple keys in a sorted sequence of keys</i></td>
</tr>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">A sorted array \(K=[k_0,\ldots,k_{n-1}]\) of integers and \(Q=[q_0,\ldots,q_{n-1}\)]</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">For each \(q_i\), its index in \(K\) or \(-1\) if it isn't in \(K\)</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(1\le n, m \le 10^4,1 \le k_i \le 10^9\) for all \(0\le i &lt; n;1 \le q_j \le 10^9\) for all \(0 \le j <m></m>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orge7c6bc5" class="outline-2">
<h2 id="orge7c6bc5">Implementation</h2>
<div class="outline-text-2" id="text-orge7c6bc5">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">multiple_search</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
    <span class="sd">"""Searches the source for the keys</span>

<span class="sd">    Args:</span>
<span class="sd">     source (list): sorted list of search items</span>
<span class="sd">     keys (list): items to search for in the source</span>

<span class="sd">    Returns:</span>
<span class="sd">     list: indices of keys in source</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">binary_search</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">]</span>
</pre></div>

<p>
I wrote this based on the problem statement, but if you look at the sample code they actually do the iteration themselves so you only need to implement <code>binary_search</code>.
</p>
</div>
</div>
<div id="outline-container-org99844c6" class="outline-2">
<h2 id="org99844c6">Sample</h2>
<div class="outline-text-2" id="text-org99844c6">
<p>
Inputs
</p>
<pre class="example">
1 5 8 12 13
8 1 23 1 11
</pre>

<p>
Outputs
</p>

<pre class="example">
2 0 -1 0 -1
</pre>

<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TestKeys</span><span class="p">:</span>
    <span class="n">source</span> <span class="o">=</span> <span class="s1">'source'</span>
    <span class="n">search_terms</span> <span class="o">=</span> <span class="s1">'search-terms'</span>
    <span class="n">expected</span> <span class="o">=</span> <span class="s1">'outputs'</span>

<span class="n">TEST_CASES</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">one</span><span class="o">=</span><span class="p">{</span>
	<span class="n">TestKeys</span><span class="o">.</span><span class="n">source</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
	<span class="n">TestKeys</span><span class="o">.</span><span class="n">search_terms</span><span class="p">:</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
	<span class="n">TestKeys</span><span class="o">.</span><span class="n">expected</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="n">two</span><span class="o">=</span><span class="p">{</span>
	<span class="n">TestKeys</span><span class="o">.</span><span class="n">source</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span>
	<span class="n">TestKeys</span><span class="o">.</span><span class="n">search_terms</span><span class="p">:</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
	<span class="n">TestKeys</span><span class="o">.</span><span class="n">expected</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgc22e142" class="outline-2">
<h2 id="orgc22e142">Testing</h2>
<div class="outline-text-2" id="text-orgc22e142">
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">example</span><span class="p">,</span> <span class="n">case</span> <span class="ow">in</span> <span class="n">TEST_CASES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">example</span><span class="p">)</span>
    <span class="n">expected</span> <span class="o">=</span> <span class="n">case</span><span class="p">[</span><span class="n">TestKeys</span><span class="o">.</span><span class="n">expected</span><span class="p">]</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">multiple_search</span><span class="p">(</span><span class="n">case</span><span class="p">[</span><span class="n">TestKeys</span><span class="o">.</span><span class="n">source</span><span class="p">],</span>
			     <span class="n">case</span><span class="p">[</span><span class="n">TestKeys</span><span class="o">.</span><span class="n">search_terms</span><span class="p">])</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">expected</span><span class="p">))</span>
</pre></div>
</div>
</div>

<div id="outline-container-org66796a3" class="outline-2">
<h2 id="org66796a3">Grading</h2>
<div class="outline-text-2" id="text-org66796a3">
<p>
The binary search improves quite a bit over the linear search, passing the grader.
</p>

<pre class="example">
Good job! (Max time used: 0.69/5.00, max memory used: 40230912/536870912.)
</pre>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/collecting-signatures/" class="u-url">Collecting Signatures</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/collecting-signatures/" rel="bookmark"><time class="published dt-published" datetime="2018-07-03T17:32:46-07:00" title="2018-07-03 17:32">2018-07-03 17:32</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-org593d81b" class="outline-2">
<h2 id="org593d81b">General Problem</h2>
<div class="outline-text-2" id="text-org593d81b">
<p>
<i>Find the minimum number of points needed to cover all given segments on a line.</i>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">A sequence of \(n\) segments \([a_1, b_1],\ldots[a_n, b_n]\) on a line</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">A set of points of minimum size such that each segment contains a point</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org4f8db6a" class="outline-2">
<h2 id="org4f8db6a">The Concrete Problem</h2>
<div class="outline-text-2" id="text-org4f8db6a">
<p>
You have to collect signatures from the tenants in the building. You know the times each tenant will be in the building (represented by the <i>segments</i> in the problem) and you want to minimize the number of visits and time spent at the building. Assume that the actual visit with the tenant will take no time.
</p>

<p>
In other words, we have a bunch of line segments that may or may not overlap. We want to minimize the number of segments 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">\(n\), the number of segments, each following line is made of two points tha define a line segment \(a_i, b_i\)</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">The minimum number \(m\) of points needed, followed by the integer values for each of the points</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(1 \le n \le 100; 0 \le a_i \le b_i \le 10^9\) for all i</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org8f01583" class="outline-2">
<h2 id="org8f01583">Sample Inputs</h2>
<div class="outline-text-2" id="text-org8f01583">
</div>
<div id="outline-container-org0d333a8" class="outline-3">
<h3 id="org0d333a8">Sample One</h3>
<div class="outline-text-3" id="text-org0d333a8">
<p>
Input:
</p>
<pre class="example">
3
1 3
2 5
3 6
</pre>
<p>
Output:
</p>
<pre class="example">
1
3
</pre>

<p>
Note that the way the code is setup, the first input value isn't relevant to our solver.
</p>
</div>
</div>

<div id="outline-container-org00a7351" class="outline-3">
<h3 id="org00a7351">Sample Two</h3>
<div class="outline-text-3" id="text-org00a7351">
<p>
Input:
</p>
<pre class="example">
4
4 7
1 3
2 5
5 6
</pre>

<p>
Output:
</p>
<pre class="example">
2
3 6
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf60b5f9" class="outline-2">
<h2 id="orgf60b5f9">Implementation</h2>
<div class="outline-text-2" id="text-orgf60b5f9">
</div>
<div id="outline-container-orgeeaf7e9" class="outline-3">
<h3 id="orgeeaf7e9">Imports</h3>
<div class="outline-text-3" id="text-orgeeaf7e9">
<div class="highlight"><pre><span></span># from pypi
from expects import (
    equal,
    expect,
)
</pre></div>
</div>
</div>

<div id="outline-container-org3b44383" class="outline-3">
<h3 id="org3b44383">Overlapping</h3>
<div class="outline-text-3" id="text-org3b44383">
<p>
First, what does it mean to say that two segments overlap? Let's say we have two segments. They won't overlap if:
</p>
<ul class="org-ul">
<li>the first segment's rightmost point is to the left of the other segment's leftmost point</li>
<li>the second segment's rightmost point is to the left of the other segment's leftmost point</li>
</ul>
<p>
So they won't overlap if:
</p>

<p>
\[
R_0 &lt; L_1 \lor L_0 &gt; R_1
\]
</p>

<p>
Where \(R\) means the rightmost point for that segment and \(L\) means the leftmost point of that segment (and the first segment is \(0\) and the second one is \(1\)). To find where they <i>do</i> overlap we can negate the inequality.
</p>

<p>
\[
\neg (R_0 &lt; L_1 \lor L_0 &gt; R_1) = R_0 \le L_1 \land L_0 \le R_1
\]
</p>

<p>
Python functions are expensive, but to make it clearer I'll create a function to test for overlapping and if the final solution is too small I won't use it.
</p>
</div>
</div>


<div id="outline-container-org0f7dce7" class="outline-3">
<h3 id="org0f7dce7">The Schedule</h3>
<div class="outline-text-3" id="text-org0f7dce7">
<div class="highlight"><pre><span></span>def schedule(schedules):
    """Finds the times to visit

    Args:
     schedules (list): list of times people are available

    Returns:
     list: times to visit
    """
    return
</pre></div>
</div>
</div>
</div>
<div id="outline-container-orgbce987e" class="outline-2">
<h2 id="orgbce987e">Testing</h2>
<div class="outline-text-2" id="text-orgbce987e">
<div class="highlight"><pre><span></span>SAMPLES = dict(
    one=dict(
	inputs=[(1,3), (2, 5), (3, 6)],
	outputs=[3],
    ),
    two=dict(
	inputs=[(4, 7), (1, 3), (2, 5), (5, 6)],
	outputs=[3, 6],
    )
)
</pre></div>

<div class="highlight"><pre><span></span>class SampleKeys:
    inputs = "inputs"
    expected = "outputs"
</pre></div>

<div class="highlight"><pre><span></span>for sample, values in SAMPLES.items():
    actual = schedule(values[SampleKeys.inputs])
    expect(actual).to(equal(values[SampleKeys.expected]))
</pre></div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/maximum-advertisement-revenue/" class="u-url">Maximum Advertisement Revenue</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/maximum-advertisement-revenue/" rel="bookmark"><time class="published dt-published" datetime="2018-07-03T16:46:30-07:00" title="2018-07-03 16:46">2018-07-03 16:46</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-orgc95183c" class="outline-2">
<h2 id="orgc95183c">The Maximum Product of Two Sequences Problem</h2>
<div class="outline-text-2" id="text-orgc95183c">
<p>
This is the more general problem statement.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>Problem</b></td>
<td class="org-left"><i>Find the maximum dot product of two sequences of numbers.</i></td>
</tr>
<tr>
<td class="org-left"><b>Inputs</b></td>
<td class="org-left">Two sequences of \(n\) positive integers.</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">The maximum sum of pair-wise multiplications of the values.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org4207357" class="outline-2">
<h2 id="org4207357">The Revenue Optimization Problem</h2>
<div class="outline-text-2" id="text-org4207357">
<p>
We have \(n\) advertising slots that we want to sell to advertisers. Each slot gets a different number of clicks and each advertiser is willing to pay a different amount. How do you pair the advertiser with the slot to maximize you click-revenue?
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">Sequence of integer prices \(price_1, price_2, \ldots, price_n\) and a sequence of click-counts \(count_1, count_2,\ldots,count_n\).</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">The maximum value achievable by matching prices with click counts</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(1 \le n \le 10^3; 0 \le price_i, clicks_i \le 10^5\) for all \(1 \le i \le n\)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org95a66aa" class="outline-2">
<h2 id="org95a66aa">Samples</h2>
<div class="outline-text-2" id="text-org95a66aa">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-right">
<col class="org-left">
<col class="org-left">
<col class="org-right">
</colgroup>
<thead><tr>
<th scope="col" class="org-right"><i>n</i></th>
<th scope="col" class="org-left">prices</th>
<th scope="col" class="org-left">clicks</th>
<th scope="col" class="org-right">output</th>
</tr></thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">23</td>
<td class="org-left">39</td>
<td class="org-right">897</td>
</tr>
<tr>
<td class="org-right">3</td>
<td class="org-left">2 3 9</td>
<td class="org-left">7 4 2</td>
<td class="org-right">79</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgf5c00aa" class="outline-2">
<h2 id="orgf5c00aa">Testing</h2>
<div class="outline-text-2" id="text-orgf5c00aa">
<div class="highlight"><pre><span></span><span class="c1"># from pypi</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">equal</span><span class="p">,</span>
    <span class="n">expect</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">SAMPLES</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">one</span><span class="o">=</span>
	       <span class="nb">dict</span><span class="p">(</span><span class="n">prices</span><span class="o">=</span><span class="p">[</span><span class="mi">23</span><span class="p">,],</span>
		    <span class="n">clicks</span><span class="o">=</span><span class="p">[</span><span class="mi">39</span><span class="p">,],</span>
		    <span class="n">output</span><span class="o">=</span><span class="mi">897</span><span class="p">),</span>
	       <span class="n">two</span><span class="o">=</span>
	       <span class="nb">dict</span><span class="p">(</span><span class="n">prices</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
		    <span class="n">clicks</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
		    <span class="n">output</span><span class="o">=</span><span class="mi">79</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Keys</span><span class="p">:</span>
    <span class="n">prices</span> <span class="o">=</span> <span class="s2">"prices"</span>
    <span class="n">clicks</span> <span class="o">=</span> <span class="s2">"clicks"</span>
    <span class="n">expected</span> <span class="o">=</span> <span class="s2">"output"</span>
</pre></div>
</div>
</div>
<div id="outline-container-org9595cf4" class="outline-2">
<h2 id="org9595cf4">Implementation</h2>
<div class="outline-text-2" id="text-org9595cf4">
<p>
This might be cheating, but I'm going to use python's generator functions again to sort things.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">optimal_advertising</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">clicks</span><span class="p">):</span>
    <span class="sd">"""Finds the optimal dot product</span>

<span class="sd">    Args:</span>
<span class="sd">     prices (list): prices we can charge advertisers</span>
<span class="sd">     clicks (list): expected clicks per slot</span>

<span class="sd">    Returns:</span>
<span class="sd">     float: the maximum we can get from the prices-clicks</span>
<span class="sd">    """</span>
    <span class="n">clicks</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">clicks</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">prices</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">clicks_and_prices</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">clicks</span><span class="p">,</span> <span class="n">prices</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">click</span> <span class="o">*</span> <span class="n">price</span> <span class="k">for</span> <span class="n">click</span><span class="p">,</span> <span class="n">price</span> <span class="ow">in</span> <span class="n">clicks_and_prices</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-org19d25d2" class="outline-2">
<h2 id="org19d25d2">Testing</h2>
<div class="outline-text-2" id="text-org19d25d2">
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">SAMPLES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">expected</span> <span class="o">=</span> <span class="n">sample</span><span class="p">[</span><span class="n">Keys</span><span class="o">.</span><span class="n">expected</span><span class="p">]</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">optimal_advertising</span><span class="p">(</span><span class="n">sample</span><span class="p">[</span><span class="n">Keys</span><span class="o">.</span><span class="n">prices</span><span class="p">],</span> <span class="n">sample</span><span class="p">[</span><span class="n">Keys</span><span class="o">.</span><span class="n">clicks</span><span class="p">])</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">expected</span><span class="p">))</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgaf6e3aa" class="outline-2">
<h2 id="orgaf6e3aa">Grader Output</h2>
<div class="outline-text-2" id="text-orgaf6e3aa">
<pre class="example">
Good job! (Max time used: 0.03/5.00, max memory used: 9887744/536870912.)
</pre>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/maximum-value-of-the-loot/" class="u-url">Maximum Value of the Loot</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/maximum-value-of-the-loot/" rel="bookmark"><time class="published dt-published" datetime="2018-07-02T19:09:29-07:00" title="2018-07-02 19:09">2018-07-02 19:09</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-org90876cc" class="outline-2">
<h2 id="org90876cc">Introduction</h2>
<div class="outline-text-2" id="text-org90876cc">
<p>
A thief breaks into a spice shop and finds spices with varying values per pound. She needs to be able to maximize the amount she steals by stuffing spices into her backpack.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">Â </td>
<td class="org-left">Description</td>
</tr>
<tr>
<td class="org-left"><b>First Input</b></td>
<td class="org-left">\(n\), the number of compounds and \(W\), the capacity of the backpack.</td>
</tr>
<tr>
<td class="org-left"><b>Remaining Inputs</b></td>
<td class="org-left">\(n\) lines of price-per-pound and weight of each compound</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">Maximum price of spices stuffed into the backpack.</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(1 \le n \le 10^3\), \(0 \le W \le 2 \cdot 10^6\), \(0 \le p_i \le 2 \cdot 10^6\), \(0 \le w_i \le 2 \cdot 10^6\) for \(1 \le i \le n\)</td>
</tr>
</tbody>
</table>
<p>
Although the inputs will always be integers, the outputs might be real numbers. To match the grader output at least four digits to the right of the decimal point.
</p>
</div>
</div>
<div id="outline-container-org6f70973" class="outline-2">
<h2 id="org6f70973">Samples</h2>
<div class="outline-text-2" id="text-org6f70973">
</div>
<div id="outline-container-org29fc405" class="outline-3">
<h3 id="org29fc405">Sample One</h3>
<div class="outline-text-3" id="text-org29fc405">
<p>
Input:
</p>

<pre class="example">
3 50
60 20
100 50
120 30
</pre>

<p>
Output:
</p>
<pre class="example">
180.0000
</pre>

<p>
The output tells us that the thief's maximum haul is worth $180, which if you look at the inputs means taking 20 pounds of the first spice (worth $60) and 30 pounds of the last spice.
</p>
</div>
</div>

<div id="outline-container-org4011368" class="outline-3">
<h3 id="org4011368">Sample Two</h3>
<div class="outline-text-3" id="text-org4011368">
<pre class="example">
1 10
500 30
</pre>

<p>
Output.
</p>

<pre class="example">
166.6667
</pre>

<p>
The input tells us that the thief can only carry 10 pounds of the only available spice, so her haul is \(\frac{500}{3}\approx 166.6667\).
</p>
</div>
</div>
</div>

<div id="outline-container-orge92ea0a" class="outline-2">
<h2 id="orge92ea0a">Implementation</h2>
<div class="outline-text-2" id="text-orge92ea0a">
<p>
Because this takes a greedy approach, it will have a \(O(n)\) run-time. Since I'm sorting the values first there's actually a \(O(\log n) + O(n)\), but especially since I'm using the built-in python generators, the sort is negligible compared to the main loop.
</p>

<div class="highlight"><pre><span></span><span class="c1"># this package</span>
<span class="kn">from</span> <span class="nn">algorithmic_toolbox.helpers</span> <span class="kn">import</span> <span class="n">assert_close</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">maximize_loot</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="sd">"""Figure out the maximum value the thief can haul off</span>

<span class="sd">    Args:</span>
<span class="sd">     capacity (int): number of pounds backpack can hold</span>
<span class="sd">     weights (list): how many pounds of each item there is</span>
<span class="sd">     values (list): how much each item is worth per pound</span>

<span class="sd">    Raises:</span>
<span class="sd">     AssertionError: weights and values are different lengths</span>

<span class="sd">    Returns:</span>
<span class="sd">     float: max-value the backpack can hold</span>
<span class="sd">    """</span>
    <span class="n">weight_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">weight_count</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">),</span> \
	<span class="s2">"Weights and Values not same shape: weights={} values={}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
	    <span class="n">weight_count</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>
    <span class="n">values_per_pound</span> <span class="o">=</span> <span class="p">((</span><span class="n">values</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">/</span><span class="n">weights</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">index</span><span class="p">)</span>
			<span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">weight_count</span><span class="p">))</span>

    <span class="c1"># we have to reverse-sort it (otherwise sorting puts the smallest</span>
    <span class="c1"># number first)</span>
    <span class="n">per_poundage</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">values_per_pound</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c1"># loot is the value of what we've taken so far</span>
    <span class="n">loot</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># precondition: per_poundage is the value-per-pound in descending</span>
    <span class="c1"># order for each item along with the index of the original weight/value</span>
    <span class="k">for</span> <span class="n">value</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">per_poundage</span><span class="p">:</span>
	<span class="c1"># invariant: value is the largest price-per-pound available</span>
	<span class="k">if</span> <span class="n">capacity</span> <span class="o">&lt;</span> <span class="n">weights</span><span class="p">[</span><span class="n">index</span><span class="p">]:</span>
	    <span class="c1"># we don't have enough strength to take all of this item</span>
	    <span class="c1"># so just take as much as we can and quit</span>
	    <span class="n">loot</span> <span class="o">+=</span> <span class="n">value</span> <span class="o">*</span> <span class="n">capacity</span>
	    <span class="k">break</span>
	<span class="c1"># otherwise take all of this item</span>
	<span class="n">loot</span> <span class="o">+=</span> <span class="n">values</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
	<span class="c1"># reducing our capacity by its total weight</span>
	<span class="n">capacity</span> <span class="o">-=</span> <span class="n">weights</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
	<span class="k">if</span> <span class="n">capacity</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
	    <span class="c1"># we're out of capacity, quit</span>
	    <span class="k">break</span>
    <span class="k">return</span> <span class="n">loot</span>
</pre></div>
</div>

<div id="outline-container-org18b2f36" class="outline-3">
<h3 id="org18b2f36">Test One</h3>
<div class="outline-text-3" id="text-org18b2f36">
<div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">3</span> 
<span class="n">capacity</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">]</span>
<span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="n">expected</span> <span class="o">=</span> <span class="mf">180.0000</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">maximize_loot</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">prices</span><span class="p">)</span>
<span class="n">assert_close</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">,</span> <span class="s2">"Test One"</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-org7c7290d" class="outline-3">
<h3 id="org7c7290d">Test Two</h3>
<div class="outline-text-3" id="text-org7c7290d">
<div class="highlight"><pre><span></span><span class="n">capacity</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">500</span><span class="p">]</span>
<span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">]</span>
<span class="n">expected</span> <span class="o">=</span> <span class="mf">166.6667</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">maximize_loot</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">prices</span><span class="p">)</span>
<span class="n">assert_close</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">,</span> <span class="s2">"Test Two"</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-org121c08a" class="outline-3">
<h3 id="org121c08a">Grader Output</h3>
<div class="outline-text-3" id="text-org121c08a">
<pre class="example">
Good job! (Max time used: 0.03/5.00, max memory used: 9752576/671088640.)
</pre>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/money-change/" class="u-url">Money Change</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/money-change/" rel="bookmark"><time class="published dt-published" datetime="2018-07-02T16:40:25-07:00" title="2018-07-02 16:40">2018-07-02 16:40</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-orgfc0946f" class="outline-2">
<h2 id="orgfc0946f">Problem Description</h2>
<div class="outline-text-2" id="text-orgfc0946f">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>Task</b></td>
<td class="org-left">Find the minimum number of coins to change the input to coins with denominations 1, 5, 10</td>
</tr>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">A single integer <i>m</i>.</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">$1 â¤ m â¤ 10<sup>3</sup>&amp;</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">Minimum number of coins with denominations 1, 5, or 10 that changes <i>m</i>.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org338782c" class="outline-2">
<h2 id="org338782c">Samples</h2>
<div class="outline-text-2" id="text-org338782c">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-right">
<col class="org-right">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-right">Input</th>
<th scope="col" class="org-right">Output</th>
<th scope="col" class="org-left">Coins</th>
</tr></thead>
<tbody>
<tr>
<td class="org-right">2</td>
<td class="org-right">2</td>
<td class="org-left">1 + 1</td>
</tr>
<tr>
<td class="org-right">28</td>
<td class="org-right">6</td>
<td class="org-left">10 + 10 + 5 + 1 + 1 + 1</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orga7e1a96" class="outline-2">
<h2 id="orga7e1a96">Solution</h2>
<div class="outline-text-2" id="text-orga7e1a96">
<p>
While <i>m</i> is greater than 0, keep taking a coin with the largest denomination that isn't greater that <i>m</i>, subtracting its value from <i>m</i>.
</p>

<div class="highlight"><pre><span></span><span class="n">DENOMINATIONS</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">change_money</span><span class="p">(</span><span class="n">money</span><span class="p">):</span>
    <span class="sd">"""Make change</span>

<span class="sd">    Args:</span>
<span class="sd">     money (int): amount to break</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: minimum number of coins that money breaks into</span>
<span class="sd">    """</span>
    <span class="n">coins</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">money</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
	<span class="k">for</span> <span class="n">denomination</span> <span class="ow">in</span> <span class="n">DENOMINATIONS</span><span class="p">:</span>
	    <span class="k">if</span> <span class="n">money</span> <span class="o">&gt;=</span> <span class="n">denomination</span><span class="p">:</span>
		<span class="n">money</span> <span class="o">-=</span> <span class="n">denomination</span>
		<span class="n">coins</span> <span class="o">+=</span> <span class="mi">1</span>
		<span class="k">break</span>
    <span class="k">return</span> <span class="n">coins</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">expected</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">change_money</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">expected</span> <span class="o">==</span> <span class="n">actual</span>
<span class="n">expected</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">change_money</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">expected</span> <span class="o">==</span> <span class="n">actual</span>
</pre></div>

<p>
Although this is really a brute-force approach, it is good enough.
</p>

<pre class="example">
Good job! (Max time used: 0.03/5.00, max memory used: 9596928/536870912.)
</pre>

<p>
If you look at it, even in the worst case where you only give out pennies, the maximum run time is the value of <i>money</i>, that is, if \(money=1.50\) then the maximum theoretical run time is \(150\), regardless of the denominations,  so this solution is \(O(n)\), even though it looks brute-force-ish.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/least-common-multiple/" class="u-url">Least Common Multiple</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/least-common-multiple/" rel="bookmark"><time class="published dt-published" datetime="2018-06-27T11:08:18-07:00" title="2018-06-27 11:08">2018-06-27 11:08</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-orgab95d4d" class="outline-2">
<h2 id="orgab95d4d">Introduction</h2>
<div class="outline-text-2" id="text-orgab95d4d">
<p>
The <a href="https://en.wikipedia.org/wiki/Least_common_multiple">least common multiple</a> of two positive integers, <i>a</i> and <i>b</i> is the least positive integer <i>m</i> that is divisible by both <i>a</i> and <i>b</i>.
</p>
</div>
</div>
<div id="outline-container-org41a5f96" class="outline-2">
<h2 id="org41a5f96">Problem Description</h2>
<div class="outline-text-2" id="text-org41a5f96">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Â </th>
<th scope="col" class="org-left">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><b>Task</b></td>
<td class="org-left">Given two integers <i>a</i> and <i>b</i> find their least common multiple.</td>
</tr>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">The integers <i>a</i> and <i>b</i> on the same line separated by whitespace.</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(1 \le a,b \le 2 \cdot 10^9\)</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">The least common multiple of <i>a</i> and <i>b</i>.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org85b7222" class="outline-2">
<h2 id="org85b7222">Samples</h2>
<div class="outline-text-2" id="text-org85b7222">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-right">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Input</th>
<th scope="col" class="org-right">Output</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left">6 8</td>
<td class="org-right">24</td>
</tr>
<tr>
<td class="org-left">28851538 1183019</td>
<td class="org-right">1933050546</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><span class="n">SAMPLES</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span> <span class="mi">24</span><span class="p">,</span>
	   <span class="p">(</span><span class="mi">28851538</span><span class="p">,</span> <span class="mi">1183019</span><span class="p">):</span> <span class="mi">1933053046</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">MAX_INPUT</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span>
</pre></div>
</div>
</div>
<div id="outline-container-org60d52d7" class="outline-2">
<h2 id="org60d52d7">Imports</h2>
<div class="outline-text-2" id="text-org60d52d7">
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algorithmic_toolbox.helpers</span> <span class="kn">import</span> <span class="n">time_two_inputs</span>
<span class="kn">from</span> <span class="nn">algorithmic_toolbox.implementations</span> <span class="kn">import</span> <span class="n">greatest_common_divisor</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgbcdf538" class="outline-2">
<h2 id="orgbcdf538">Naive</h2>
<div class="outline-text-2" id="text-orgbcdf538">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">lcm_naive</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">"""Computes the Least Common multiple of a and b</span>

<span class="sd">    Args:</span>
<span class="sd">     a, b: non-negative integers</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: the least common multiples of a and b</span>
<span class="sd">    """</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">l</span> <span class="o">%</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">l</span> <span class="o">%</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
	    <span class="k">return</span> <span class="n">l</span>

    <span class="k">return</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_two_inputs</span><span class="p">(</span><span class="n">lcm_naive</span><span class="p">,</span> <span class="s2">"Naive"</span><span class="p">,</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="mi">24</span><span class="p">,</span> <span class="n">MAX_INPUT</span><span class="p">)</span>
</pre></div>

<p>
As expected, this fails the grader.
</p>

<pre class="example">
Failed case #2/42: time limit exceeded Input: 14159572 63967072 Your output: stderr: (Time used: 9.97/5.00, memory used: 9879552/536870912.)
</pre>
</div>
</div>

<div id="outline-container-org2c535a8" class="outline-2">
<h2 id="org2c535a8">Using The Greatest Common Divisor</h2>
<div class="outline-text-2" id="text-org2c535a8">
<p>
If you multiply both numbers together you will get their greatest common multiple. If you then divide that by their greatest common divisor, you will be left with their least common multiple.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">lcm_gcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">"""Finds the least common multiple of two integers</span>

<span class="sd">    Args:</span>
<span class="sd">     a, b: integers greater than or equal to 1</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="o">//</span><span class="n">greatest_common_divisor</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">a_and_b</span><span class="p">,</span> <span class="n">answer</span> <span class="ow">in</span> <span class="n">SAMPLES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">time_two_inputs</span><span class="p">(</span><span class="n">lcm_gcd</span><span class="p">,</span> <span class="s2">"GCD"</span><span class="p">,</span> <span class="n">a_and_b</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">MAX_INPUT</span><span class="p">)</span>
</pre></div>

<p>
The Grader output:
</p>

<pre class="example">
Good job! (Max time used: 0.27/5.00, max memory used: 9924608/536870912.)
</pre>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/greatest-common-divisor/" class="u-url">Greatest Common Divisor</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/greatest-common-divisor/" rel="bookmark"><time class="published dt-published" datetime="2018-06-26T14:51:11-07:00" title="2018-06-26 14:51">2018-06-26 14:51</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-orgbccde5d" class="outline-2">
<h2 id="orgbccde5d">Introduction</h2>
<div class="outline-text-2" id="text-orgbccde5d">
<p>
The greatest common divisor \(GCD(a,b)\) of two non-negative integers (<i>a</i> and <i>b</i>) which are not both equal to 0 is the greatest integer <i>d</i> that divides both <i>a</i> and <i>b</i>. The goal here is to implement the <a href="https://en.wikipedia.org/wiki/Euclidean_algorithm">Euclidean Algorithm</a> for computing the GCD.
</p>
</div>
</div>

<div id="outline-container-org8b93291" class="outline-2">
<h2 id="org8b93291">Problem Description</h2>
<div class="outline-text-2" id="text-org8b93291">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Â </th>
<th scope="col" class="org-left">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><b>Task</b></td>
<td class="org-left">Given two integers \(a\) and \(b\), find their greatest common divisor.</td>
</tr>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">The two integers \(a\) and \(b\) are given on the same line separated by a space.</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(1 \le a,b \le 2 \cdot 10^9\)</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">GCD(a,b)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org72fbe55" class="outline-2">
<h2 id="org72fbe55">Imports</h2>
<div class="outline-text-2" id="text-org72fbe55">
<div class="highlight"><pre><span></span><span class="c1"># python standard library</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">datetime</span><span class="p">,</span>
    <span class="n">timedelta</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div id="outline-container-org03229fc" class="outline-2">
<h2 id="org03229fc">Samples</h2>
<div class="outline-text-2" id="text-org03229fc">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-right">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Input</th>
<th scope="col" class="org-right">Output</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left">18 35</td>
<td class="org-right">1</td>
</tr>
<tr>
<td class="org-left">28851538 1183019</td>
<td class="org-right">17657</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><span class="n">SAMPLES</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">35</span><span class="p">):</span> <span class="mi">1</span><span class="p">,</span>
	   <span class="p">(</span><span class="mi">28851538</span><span class="p">,</span> <span class="mi">1183019</span><span class="p">):</span> <span class="mi">17657</span><span class="p">}</span>
<span class="n">MAX_TIME</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">MAX_INPUT</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">time_two_inputs</span><span class="p">(</span><span class="n">implementation</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">a_and_b</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">max_time</span><span class="o">=</span><span class="n">MAX_TIME</span><span class="p">,</span> <span class="n">max_input</span><span class="o">=</span><span class="n">MAX_INPUT</span><span class="p">):</span>
    <span class="sd">"""Time the implementation</span>

<span class="sd">    Args:</span>
<span class="sd">     implementation: callable to time</span>
<span class="sd">     tag (str): name for the output</span>
<span class="sd">     a_and_b (tuple): inputs for the implementation</span>
<span class="sd">     expected (int): the expected output of the implementation</span>

<span class="sd">    Raises:</span>
<span class="sd">     AssertionError: output was wrong or it took too long</span>
<span class="sd">    """</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a_and_b</span>
    <span class="k">assert</span> <span class="n">a</span> <span class="o">&lt;=</span> <span class="n">max_input</span><span class="p">,</span> <span class="s2">"a too large: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">b</span> <span class="o">&lt;=</span> <span class="n">max_input</span><span class="p">,</span> <span class="s2">"b too large: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Starting {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">implementation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Elapsed time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">elapsed</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> <span class="s2">"Expected: {} Actual: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">elapsed</span> <span class="o">&lt;=</span> <span class="n">MAX_TIME</span><span class="p">,</span> <span class="s2">"Took too long: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">elapsed</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
<div id="outline-container-org7037d39" class="outline-2">
<h2 id="org7037d39">Naive GCD</h2>
<div class="outline-text-2" id="text-org7037d39">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gcd_naive</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">"""Naive implementation of GCD</span>

<span class="sd">    Args:</span>
<span class="sd">     a, b: non-negative integers</span>
<span class="sd">    """</span>
    <span class="n">current_gcd</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">a</span> <span class="o">%</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">%</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
	    <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">current_gcd</span><span class="p">:</span>
		<span class="n">current_gcd</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">return</span> <span class="n">current_gcd</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">answer</span> <span class="ow">in</span> <span class="n">SAMPLES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">time_it</span><span class="p">(</span><span class="n">gcd_naive</span><span class="p">,</span> <span class="s2">"Naive"</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">answer</span><span class="p">)</span>
</pre></div>

<p>
This fails the grader.
</p>

<pre class="example">
Failed case #10/22: time limit exceeded Input: 100000000 100000000 Your output: stderr: (Time used: 9.97/5.00, memory used: 9887744/536870912.)
</pre>
</div>
</div>

<div id="outline-container-orgd3644f2" class="outline-2">
<h2 id="orgd3644f2">Modulus Version</h2>
<div class="outline-text-2" id="text-orgd3644f2">
<p>
This is a variation on Euclid's Algorithim where you repeatedly use the remainder of \(\frac{a, b}\) to replace \(b\) until there is no remainder (\(b=0\)).
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gcd_modulus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">"""finds the GCD of a and b</span>

<span class="sd">    Args:</span>
<span class="sd">     a, b: non-negative integers</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: the GCD of a and b</span>
<span class="sd">    """</span>
    <span class="k">while</span> <span class="n">b</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
	<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">answer</span> <span class="ow">in</span> <span class="n">SAMPLES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">time_it</span><span class="p">(</span><span class="n">gcd_modulus</span><span class="p">,</span> <span class="s2">"Modulus"</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">answer</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">a_b</span> <span class="o">=</span> <span class="mi">100000000</span><span class="p">,</span> <span class="mi">100000000</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">expected</span> <span class="o">=</span> <span class="n">gcd_naive</span><span class="p">(</span><span class="o">*</span><span class="n">a_b</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">"Elapsed: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
</pre></div>

<p>
My computer appears to be faster than the grader, but it still fails.
</p>

<div class="highlight"><pre><span></span><span class="n">time_it</span><span class="p">(</span><span class="n">gcd_modulus</span><span class="p">,</span> <span class="s2">"Modulus"</span><span class="p">,</span> <span class="n">a_b</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
</pre></div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/last-digit-of-a-large-fibonacci-number/" class="u-url">Last Digit of a Large Fibonacci Number</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/last-digit-of-a-large-fibonacci-number/" rel="bookmark"><time class="published dt-published" datetime="2018-06-25T16:28:37-07:00" title="2018-06-25 16:28">2018-06-25 16:28</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-org3e35378" class="outline-2">
<h2 id="org3e35378">Introduction</h2>
<div class="outline-text-2" id="text-org3e35378">
<p>
The goal is to find the last digit of the <i>n</i>-th Fibonacci number. The problem is that Fibonacci numbers grow exponetially fast. For instance
</p>

<p>
\[
F_{200} =  280 571 172 992 510 140 037 611 932 413 038 677 189 525
\]
</p>

<p>
So even our iterative version will prove too slow. Also, it may produce numbers that are too large to fit in memory. So instead we are going to only save the last digit of each number.
</p>

<p>
\[
F_i \gets (F_{i-1} + F_{i-2}) \mod 10
\]
</p>
</div>
</div>

<div id="outline-container-org4312063" class="outline-2">
<h2 id="org4312063">Problem Description</h2>
<div class="outline-text-2" id="text-org4312063">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Â </th>
<th scope="col" class="org-left">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><b>Task</b></td>
<td class="org-left">Given an integer <i>n</i>, find the last digit of the /n/th Fibonacci number \(F_n\) (\(F_n \mod 10\))</td>
</tr>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">A single integer <i>n</i>.</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(0 \le n \le 10^7\)</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">The last digit of \(F_n\)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org8020602" class="outline-2">
<h2 id="org8020602">Samples</h2>
<div class="outline-text-2" id="text-org8020602">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-right">
<col class="org-right">
</colgroup>
<thead><tr>
<th scope="col" class="org-right">Input</th>
<th scope="col" class="org-right">Output</th>
</tr></thead>
<tbody>
<tr>
<td class="org-right">3</td>
<td class="org-right">2</td>
</tr>
<tr>
<td class="org-right">331</td>
<td class="org-right">9</td>
</tr>
<tr>
<td class="org-right">327305</td>
<td class="org-right">5</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org177e0cd" class="outline-2">
<h2 id="org177e0cd">Constants</h2>
<div class="outline-text-2" id="text-org177e0cd">
<div class="highlight"><pre><span></span><span class="n">MAX_INPUT</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">7</span>
<span class="n">MAX_TIME</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
<div id="outline-container-org485a681" class="outline-2">
<h2 id="org485a681">Imports</h2>
<div class="outline-text-2" id="text-org485a681">
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">datetime</span><span class="p">,</span>
    <span class="n">timedelta</span><span class="p">,</span>
    <span class="p">)</span>
<span class="c1"># this project</span>
<span class="kn">from</span> <span class="nn">algorithmic_toolbox.helpers</span> <span class="kn">import</span> <span class="n">time_it</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgde08c51" class="outline-2">
<h2 id="orgde08c51">Naive Implementation</h2>
<div class="outline-text-2" id="text-orgde08c51">
<p>
By taking the modulo of 10 for the final number you reduce it to the final digit because it's the remainder of some number times 10. For example, 112 is 110 + 2, so \(112 \mod 10\) is \(112 - (11 \times 10) = 2\).
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_fibonacci_last_digit_naive</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">n</span>

    <span class="n">previous</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">current</span>  <span class="o">=</span> <span class="mi">1</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
	<span class="n">previous</span><span class="p">,</span> <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="p">,</span> <span class="n">previous</span> <span class="o">+</span> <span class="n">current</span>
    <span class="k">return</span> <span class="n">current</span> <span class="o">%</span> <span class="mi">10</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_it</span><span class="p">(</span><span class="n">get_fibonacci_last_digit_naive</span><span class="p">,</span> <span class="s2">"Naive"</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">max_input</span><span class="o">=</span><span class="n">MAX_INPUT</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_it</span><span class="p">(</span><span class="n">get_fibonacci_last_digit_naive</span><span class="p">,</span> <span class="s2">"Naive"</span><span class="p">,</span> <span class="mi">331</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">max_input</span><span class="o">=</span><span class="n">MAX_INPUT</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-org855ae54" class="outline-2">
<h2 id="org855ae54">Modulo Version</h2>
<div class="outline-text-2" id="text-org855ae54">
<p>
Each number in the sequence is the sum of the previous two numbers. The last digit is always the sum of the last digits of the previous two numbers. So to calculate the last digit you only need to keep track of the last digit of each number. By taking the modulus of 10, you are always.
</p>

<div class="highlight"><pre><span></span><span class="n">first</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_fibonacci_last_digit_modulo</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">first</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">n</span>

    <span class="n">previous</span><span class="p">,</span> <span class="n">current</span> <span class="o">=</span> <span class="n">first</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
	<span class="n">previous</span><span class="p">,</span> <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="p">,</span> <span class="p">(</span><span class="n">previous</span> <span class="o">+</span> <span class="n">current</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Current: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">current</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">current</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_it</span><span class="p">(</span><span class="n">get_fibonacci_last_digit_modulo</span><span class="p">,</span> <span class="s2">"Modulo"</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">max_input</span><span class="o">=</span><span class="n">MAX_INPUT</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_it</span><span class="p">(</span><span class="n">get_fibonacci_last_digit_modulo</span><span class="p">,</span> <span class="s2">"Modulo"</span><span class="p">,</span> <span class="mi">331</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">max_input</span><span class="o">=</span><span class="n">MAX_INPUT</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_it</span><span class="p">(</span><span class="n">get_fibonacci_last_digit_modulo</span><span class="p">,</span> <span class="s2">"Modulo"</span><span class="p">,</span> <span class="mi">327305</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">max_input</span><span class="o">=</span><span class="n">MAX_INPUT</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_it</span><span class="p">(</span><span class="n">get_fibonacci_last_digit_modulo</span><span class="p">,</span> <span class="s2">"Modulo"</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">max_input</span><span class="o">=</span><span class="n">MAX_INPUT</span><span class="p">)</span>
</pre></div>

<p>
This is the grader output.
</p>

<pre class="example">
Good job! (Max time used: 0.12/5.00, max memory used: 9580544/536870912.)
</pre>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/fibonacci-number/" class="u-url">Fibonacci Number</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/fibonacci-number/" rel="bookmark"><time class="published dt-published" datetime="2018-06-24T20:49:54-07:00" title="2018-06-24 20:49">2018-06-24 20:49</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-orgbe1545a" class="outline-2">
<h2 id="orgbe1545a">Imports</h2>
<div class="outline-text-2" id="text-orgbe1545a">
<div class="highlight"><pre><span></span><span class="c1"># python standard library</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">datetime</span><span class="p">,</span>
    <span class="n">timedelta</span><span class="p">,</span>
    <span class="p">)</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># third party</span>
<span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Memory</span>
</pre></div>
</div>
</div>
<div id="outline-container-org3939bc5" class="outline-2">
<h2 id="org3939bc5">The Fibonacci Problem</h2>
<div class="outline-text-2" id="text-org3939bc5">
<p>
THe Fibonacci Sequence is defined as
</p>

<p>
\[F_0 = 0, F_1 = 1,\ldots, F_i =F_{i-1} + F_{i-2} \text{ for } i \ge 2\]
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Â </th>
<th scope="col" class="org-left">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><b>Task</b></td>
<td class="org-left">Given an integer <i>n</i>, find the /n/th Fibonacci number \(F_n\).</td>
</tr>
<tr>
<td class="org-left"><b>Input</b></td>
<td class="org-left">A single integer <i>n</i>.</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(0 \le n \le 45\)</td>
</tr>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">\(F_n\)</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-orga99bdff" class="outline-3">
<h3 id="orga99bdff">Sample Values</h3>
<div class="outline-text-3" id="text-orga99bdff">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-right">
<col class="org-right">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-right">Input</th>
<th scope="col" class="org-right">Output</th>
<th scope="col" class="org-left">Meaning</th>
</tr></thead>
<tbody><tr>
<td class="org-right">10</td>
<td class="org-right">55</td>
<td class="org-left">\(F_10=55\)</td>
</tr></tbody>
</table>
</div>
</div>

<div id="outline-container-orgb3c0b6f" class="outline-3">
<h3 id="orgb3c0b6f">Constants</h3>
<div class="outline-text-3" id="text-orgb3c0b6f">
<p>
These are translations from the problem description
</p>
<div class="highlight"><pre><span></span><span class="n">MAX_TIME</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">MAX_INPUT</span> <span class="o">=</span> <span class="mi">45</span>
</pre></div>
</div>
</div>
</div>
<div id="outline-container-orgc34c649" class="outline-2">
<h2 id="orgc34c649">Helpers</h2>
<div class="outline-text-2" id="text-orgc34c649">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">time_it</span><span class="p">(</span><span class="n">implementation</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">input_value</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">max_time</span><span class="o">=</span><span class="n">MAX_TIME</span><span class="p">):</span>
    <span class="sd">"""Times the implementation</span>

<span class="sd">    Args: </span>
<span class="sd">     implementation: callable to pass input_value to</span>
<span class="sd">     tag (str): identifier to add to the output</span>
<span class="sd">     input_value (int): the number to pass to the implementation</span>
<span class="sd">     expected (int): the expected value</span>
<span class="sd">     max_time (float): number of seconds allowed</span>

<span class="sd">    Raises:</span>
<span class="sd">	AssertionError: wrong value or took too long</span>
<span class="sd">    """</span>
    <span class="k">assert</span> <span class="n">input_value</span> <span class="o">&lt;=</span> <span class="n">MAX_INPUT</span><span class="p">,</span> <span class="s2">"n too large: {}, max allowed: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">input_value</span><span class="p">,</span>
									       <span class="n">MAX_INPUT</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Starting {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">implementation</span><span class="p">(</span><span class="n">input_value</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> <span class="s2">"Actual: {} Expected: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
	    <span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"({}) Okay Elapsed time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">elapsed</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">elapsed</span> <span class="o">&lt;=</span> <span class="n">max_time</span><span class="p">,</span> <span class="s2">"Time Greater than {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">max_time</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgcb29cca" class="outline-2">
<h2 id="orgcb29cca">Naive Implementation</h2>
<div class="outline-text-2" id="text-orgcb29cca">
<p>
The 'naive' implementation uses recursion to calculate a fibonacci number.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">"""Calculates the nth fibonacci number</span>

<span class="sd">    Args:</span>
<span class="sd">     n (int): the fibonacci number to get (e.g. 3 means third)</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: nth fibonacci number</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
	    <span class="o">+</span> <span class="n">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_it</span><span class="p">(</span><span class="n">calculate_fibonacci_recursive</span><span class="p">,</span> <span class="s2">"Recursive"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span>
</pre></div>

<p>
This fails the grader (as expected).
</p>

<pre class="example">
Failed case #37/46: time limit exceeded 
Input: 36 
Your output: 14930352 
stderr: (Time used: 5.63/5.00, memory used: 9613312/536870912.)
</pre>
</div>
</div>

<div id="outline-container-orgcad7afa" class="outline-2">
<h2 id="orgcad7afa">The Tester</h2>
<div class="outline-text-2" id="text-orgcad7afa">
<p>
We have kind of a chicken and the egg problem here. We know that the recursive version is correct, but it is too slow. But in order to validate our newer versions, we need to run it to check for correctness. To solve this problem I'm going to use a cache.
</p>

<div class="highlight"><pre><span></span><span class="n">memory</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s2">"memories"</span><span class="p">)</span>

<span class="nd">@memory.cache</span>
<span class="k">def</span> <span class="nf">reference_implementation</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">"""Calculates the nth fibonacci number</span>

<span class="sd">    Args:</span>
<span class="sd">     n (int): the fibonacci number to get (e.g. 3 means third)</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: nth fibonacci number</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
	    <span class="o">+</span> <span class="n">calculate_fibonacci_recursive</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">time_once</span><span class="p">(</span><span class="n">implementation</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">"""Runs the implementation once</span>

<span class="sd">    Args:</span>
<span class="sd">     implementation: callable to pass input</span>
<span class="sd">     n: value to pass to the implementation</span>

<span class="sd">    Returns:</span>
<span class="sd">     output of implementation</span>
<span class="sd">    """</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">implementation</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Elapsed: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">output</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run_range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">"""run the reference implementation n times</span>

<span class="sd">    Args:</span>
<span class="sd">     n (int): number of times to run the reference implementation</span>
<span class="sd">    """</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">input_value</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="n">output</span> <span class="o">=</span> <span class="n">reference_implementation</span><span class="p">(</span><span class="n">input_value</span><span class="p">)</span>
    <span class="k">return</span> 
</pre></div>

<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">endpoint</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">MAX_INPUT</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"endpoint: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">endpoint</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">endpoint</span><span class="p">):</span>
	<span class="n">run_range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">time_once</span><span class="p">(</span><span class="n">reference_implementation</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
</pre></div>

<p>
In case I accidentally re-run that last call and it uses the cache I'll note here that the original run time was 8 minutes and 40 seconds.
</p>

<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Tester</span><span class="p">:</span>
    <span class="sd">"""Class to test the implementation</span>

<span class="sd">    Args: </span>
<span class="sd">     implementation: callable to pass input_value to</span>
<span class="sd">     tag (str): identifier to add to the output</span>
<span class="sd">     iterations (int): number of times to run the testing</span>
<span class="sd">     verbose (bool): if true, emit more text</span>
<span class="sd">     max_time (float): number of seconds allowed</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">implementation</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">iterations</span><span class="p">,</span>
		 <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
		 <span class="n">max_time</span><span class="o">=</span><span class="n">MAX_TIME</span><span class="p">):</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">implementation</span> <span class="o">=</span> <span class="n">implementation</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">max_time</span> <span class="o">=</span> <span class="n">max_time</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="n">iterations</span>
	<span class="k">return</span>

    <span class="k">def</span> <span class="nf">output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">statement</span><span class="p">):</span>
	<span class="sd">"""prints the statement if verbose is on"""</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
	    <span class="k">print</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">time_it</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_value</span><span class="p">):</span>
	<span class="sd">"""Times the implementation</span>

<span class="sd">	.. warning:: This uses the ``reference_implementation`` to get the</span>
<span class="sd">	   expected value. Make sure it's implemented and the values are cached</span>

<span class="sd">	Args:</span>
<span class="sd">	 input_value (int): input for the implementation</span>
<span class="sd">	Raises:</span>
<span class="sd">	 AssertionError: wrong value or took too long</span>
<span class="sd">	"""</span>
	<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">"Starting {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">))</span>
	<span class="n">expected</span> <span class="o">=</span> <span class="n">reference_implementation</span><span class="p">(</span><span class="n">input_value</span><span class="p">)</span>
	<span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="p">(</span><span class="n">input_value</span><span class="p">)</span>
	<span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> <span class="s2">"n: {} Actual: {} Expected: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
	    <span class="n">input_value</span><span class="p">,</span> <span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
	<span class="n">elapsed</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">"({}) Okay Elapsed time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">elapsed</span><span class="p">))</span>
	<span class="k">assert</span> <span class="n">elapsed</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_time</span><span class="p">,</span> <span class="s2">"Time Greater than {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_time</span><span class="p">)</span>
	<span class="k">return</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="sd">"""Generates random numbers and times it"""</span>
	<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"***** {} *****"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">))</span>
	<span class="k">for</span> <span class="n">iteration</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iterations</span><span class="p">):</span>
	    <span class="n">n</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="n">MAX_INPUT</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
	    <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">"n: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
	    <span class="bp">self</span><span class="o">.</span><span class="n">time_it</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Total Elapsed: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()))</span>
	<span class="k">return</span>            
</pre></div>
</div>
</div>

<div id="outline-container-org709e579" class="outline-2">
<h2 id="org709e579">An Iterative Version</h2>
<div class="outline-text-2" id="text-org709e579">
<p>
To try and speed things up I'm going to use an iterative version instead of a recursive one.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fibonacci_iterative</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">"""Calculates the nth fibonacci number</span>

<span class="sd">    Args:</span>
<span class="sd">     n (int): the fibonacci number to get (e.g. 3 means third)</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: nth fibonacci number</span>
<span class="sd">    """</span>
    <span class="n">first</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">first</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">n</span>
    <span class="n">previous</span><span class="p">,</span> <span class="n">current</span> <span class="o">=</span> <span class="n">first</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	<span class="n">previous</span><span class="p">,</span> <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="p">,</span> <span class="n">previous</span> <span class="o">+</span> <span class="n">current</span>
    <span class="k">return</span> <span class="n">current</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">test</span> <span class="o">=</span> <span class="n">Tester</span><span class="p">(</span><span class="n">fibonacci_iterative</span><span class="p">,</span> <span class="s2">"Iterative"</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">test</span><span class="p">()</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">f_0</span> <span class="o">=</span> <span class="n">fibonacci_iterative</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="n">f_1</span> <span class="o">=</span> <span class="n">reference_implementation</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">f_0</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">f_1</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">f_0</span> <span class="o">==</span> <span class="n">f_1</span>
</pre></div>

<p>
This passes the grader.
</p>

<pre class="example">
Good job! (Max time used: 0.03/5.00, max memory used: 9637888/536870912.)
</pre>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/maximum-pairwise-product/" class="u-url">Maximum Pairwise Product</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="posts/maximum-pairwise-product/" rel="bookmark"><time class="published dt-published" datetime="2018-06-24T16:42:47-07:00" title="2018-06-24 16:42">2018-06-24 16:42</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-org577b7fa" class="outline-2">
<h2 id="org577b7fa">Imports</h2>
<div class="outline-text-2" id="text-org577b7fa">
<p>
Since the test only uses python standard library I'll try and stick to that, but since the stress-test isn't part of the assignment I'll cheat and use numpy to generate the random input.
</p>

<div class="highlight"><pre><span></span><span class="c1"># python standad library</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">datetime</span><span class="p">,</span>
    <span class="n">timedelta</span><span class="p">,</span>
    <span class="p">)</span>

<span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># from pypi</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">jit</span>
<span class="kn">import</span> <span class="nn">numpy</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgb73d5bb" class="outline-2">
<h2 id="orgb73d5bb">Problem Statement</h2>
<div class="outline-text-2" id="text-orgb73d5bb">
<p>
<i>Find the maximum product of two distinct numbers in a sequence of non-negative integers.</i>
</p>
<ul class="org-ul">
<li>
<b>Input:</b> A sequence of non-negative integers.</li>
<li>
<b>Output:</b> The maximum value that can be obtained by multiplying two different elements from the sequence.</li>
</ul>
<p>
Given a sequence of non-negative numbers \(a_1,\ldots,a_n\), compute
</p>

<p>
\[
\max_{1 \le i \neq j \le n} a_i a_j
\]
</p>

<p>
\(i\) and \(j\) should be different, although \(a_i\) and \(a_j\) might be equal.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left"><b>Input</b></th>
<th scope="col" class="org-left">Â </th>
</tr></thead>
<tbody>
<tr>
<td class="org-left">First Line</td>
<td class="org-left">
<i>n</i> - the number of input values</td>
</tr>
<tr>
<td class="org-left">Second Line</td>
<td class="org-left">\(a_1 \ldots a_n\) - space-separated list of values</td>
</tr>
</tbody>
</table>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>Output</b></td>
<td class="org-left">the maximum pairwise product from the input.</td>
</tr>
<tr>
<td class="org-left"><b>Constraints</b></td>
<td class="org-left">\(2 \le n \le 2 \times 10^5; 0 \le a_1,\ldots,a_n\le 2 \times 10^5\)</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org50a1cf7" class="outline-3">
<h3 id="org50a1cf7">Example Values</h3>
<div class="outline-text-3" id="text-org50a1cf7">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-right">
<col class="org-left">
<col class="org-right">
</colgroup>
<thead><tr>
<th scope="col" class="org-right">First Input</th>
<th scope="col" class="org-left">Second Input</th>
<th scope="col" class="org-right">Output</th>
</tr></thead>
<tbody>
<tr>
<td class="org-right">5</td>
<td class="org-left">5 6 2 7 4</td>
<td class="org-right">42</td>
</tr>
<tr>
<td class="org-right">3</td>
<td class="org-left">1 2 3</td>
<td class="org-right">6</td>
</tr>
<tr>
<td class="org-right">10</td>
<td class="org-left">7 5 14 2 8 8 10 1 2 3</td>
<td class="org-right">140</td>
</tr>
</tbody>
</table>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Limit</th>
<th scope="col" class="org-left">Value</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left">Time</td>
<td class="org-left">5 seconds</td>
</tr>
<tr>
<td class="org-left">Memory</td>
<td class="org-left">512 Mb</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orge327ccc" class="outline-2">
<h2 id="orge327ccc">Some Constants</h2>
<div class="outline-text-2" id="text-orge327ccc">
<p>
This is just a translation of some of the problem statement values to python so we can use them.
</p>

<div class="highlight"><pre><span></span><span class="n">MAX_TIME</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">MAX_INPUTS</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">5</span>
<span class="n">MAX_VALUE</span> <span class="o">=</span> <span class="n">MAX_INPUTS</span>
<span class="n">MAX_CASE</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="mi">39999800000</span><span class="p">,</span>
		<span class="n">inputs</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">MAX_VALUE</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">MAX_CASE</span><span class="p">[</span><span class="s2">"inputs"</span><span class="p">])</span> <span class="o">==</span> <span class="n">MAX_INPUTS</span>
<span class="k">assert</span> <span class="nb">max</span><span class="p">(</span><span class="n">MAX_CASE</span><span class="p">[</span><span class="s2">"inputs"</span><span class="p">])</span> <span class="o">==</span> <span class="n">MAX_VALUE</span><span class="p">,</span> <span class="s2">"Actual: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">MAX_CASE</span><span class="p">[</span><span class="s2">"inputs"</span><span class="p">]))</span>
<span class="n">INPUTS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">42</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,],</span>
    <span class="mi">6</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="mi">140</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
    <span class="mi">10</span><span class="o">**</span><span class="mi">5</span> <span class="o">*</span> <span class="mi">9</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">4</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">4</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div id="outline-container-org77ccbb7" class="outline-2">
<h2 id="org77ccbb7">Helpers</h2>
<div class="outline-text-2" id="text-org77ccbb7">
<p>
These are some functions to help validate the algorithms.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_inputs</span><span class="p">(</span><span class="n">implementation</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">INPUTS</span><span class="p">,</span> <span class="n">use_max</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">"""Checks the inputs with the implementation</span>

<span class="sd">    Args:</span>
<span class="sd">     implementation: callable to check</span>
<span class="sd">     inputs (dict): expected, input pairs</span>
<span class="sd">     use_max (bool): if True use the max-range value (too slow for brute force)</span>

<span class="sd">    Raises:</span>
<span class="sd">     AssertionError: one of the outputs wasn't expected</span>
<span class="sd">    """</span>
    <span class="k">for</span> <span class="n">expected</span><span class="p">,</span> <span class="n">input_values</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
	<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="n">actual</span> <span class="o">=</span> <span class="n">implementation</span><span class="p">(</span><span class="n">input_values</span><span class="p">)</span>
	<span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> <span class="s2">"Inputs: {} Expected: {} Actual: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
	    <span class="n">input_values</span><span class="p">,</span>
	    <span class="n">expected</span><span class="p">,</span>
	    <span class="n">actual</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Elapsed Time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">use_max</span><span class="p">:</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Max Case"</span><span class="p">)</span>
	<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="n">actual</span> <span class="o">=</span> <span class="n">implementation</span><span class="p">(</span><span class="n">MAX_CASE</span><span class="p">[</span><span class="s2">"inputs"</span><span class="p">])</span>
	<span class="n">expected</span> <span class="o">=</span> <span class="n">MAX_CASE</span><span class="p">[</span><span class="s2">"output"</span><span class="p">]</span>
	<span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> <span class="s2">"Inputs: {} Expected: {} Actual: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
	    <span class="n">MAX_CASE</span><span class="p">[</span><span class="s2">"inputs"</span><span class="p">],</span>
	    <span class="n">expected</span><span class="p">,</span>
	    <span class="n">actual</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Elapsed Time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"All passed"</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>

<div id="outline-container-org1876a8c" class="outline-2">
<h2 id="org1876a8c">Brute Force Implementation</h2>
<div class="outline-text-2" id="text-org1876a8c">
<p>
This is given as part of the problem. It traverses all the values and finds the largest product.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">max_pairwise_product_brute</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
    <span class="sd">"""Calculates the largest pairwise-product for a list</span>

<span class="sd">    Args:</span>
<span class="sd">     numbers (list): integers to check</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: largest product created from numbers</span>
<span class="sd">    """</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
    <span class="n">max_product</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">first</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">for</span> <span class="n">second</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
	    <span class="n">max_product</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_product</span><span class="p">,</span>
			      <span class="n">numbers</span><span class="p">[</span><span class="n">first</span><span class="p">]</span> <span class="o">*</span> <span class="n">numbers</span><span class="p">[</span><span class="n">second</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">max_product</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">check_inputs</span><span class="p">(</span><span class="n">max_pairwise_product_brute</span><span class="p">,</span> <span class="n">use_max</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

<p>
Because we are traversing all the numbers twice, the brute-force version has a run time of \(O(n^2)\). Since the \(n\) can be from \(2\) to \(2 \times 10^5\) that means our maximum run time will be \(4 \times 10^10\), which is too large.
</p>

<p>
Running this through the grader gives this output.
</p>

<pre class="example">
Failed case #4/17: time limit exceeded (Time used: 9.98/5.00, memory used: 20905984/536870912.)
</pre>
</div>
</div>

<div id="outline-container-org7156c5e" class="outline-2">
<h2 id="org7156c5e">Search</h2>
<div class="outline-text-2" id="text-org7156c5e">
<p>
Instead of using nested for-loops, we can search the numbers twice to find the two biggest numbers, this changes the run time to \(2n\) or \(O(n)\).
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">max_pairwise_product_take_two</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
    <span class="sd">"""Finds the maximum pairwise product in te numbers</span>

<span class="sd">    Args:</span>
<span class="sd">     numbers (list): non-negative integers</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: largest possible product from the numbers</span>
<span class="sd">    """</span>    
    <span class="n">first_index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">first_value</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">2</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">numbers</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">first_value</span><span class="p">:</span>
	    <span class="n">first_value</span> <span class="o">=</span> <span class="n">numbers</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
	    <span class="n">first_index</span> <span class="o">=</span> <span class="n">index</span>

    <span class="n">second_value</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">start</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">first_index</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">index</span> <span class="o">!=</span> <span class="n">first_index</span> <span class="ow">and</span> <span class="n">numbers</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">second_value</span><span class="p">:</span>
	    <span class="n">second_value</span> <span class="o">=</span> <span class="n">numbers</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">first_value</span> <span class="o">*</span> <span class="n">second_value</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">check_inputs</span><span class="p">(</span><span class="n">max_pairwise_product_take_two</span><span class="p">)</span>
</pre></div>

<p>
This one passes the grader, doing surprisingly well, even though I was thinking it would need more optimizing.
</p>

<pre class="example">
Good job! (Max time used: 0.15/5.00, max memory used: 26734592/536870912.)
</pre>
</div>
</div>

<div id="outline-container-orgd6e7fd0" class="outline-2">
<h2 id="orgd6e7fd0">Another Improvement</h2>
<div class="outline-text-2" id="text-orgd6e7fd0">
<p>
Rather than go through the second loop, I thought that since the previous maximum value is always the next highest value so far, we can just save it directly.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">max_pairwise_product_take_three</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
    <span class="sd">"""Finds the maximum pairwise product in te numbers</span>

<span class="sd">    Args:</span>
<span class="sd">     numbers (list): non-negative integers</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: largest possible product from the numbers</span>
<span class="sd">    """</span>    
    <span class="n">max_value</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">previous_value</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">2</span>
    <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
	<span class="k">if</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="n">max_value</span><span class="p">:</span>
	    <span class="n">previous_value</span><span class="p">,</span> <span class="n">max_value</span> <span class="o">=</span> <span class="n">max_value</span><span class="p">,</span> <span class="n">number</span>
	<span class="k">elif</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="n">previous_value</span><span class="p">:</span>
	    <span class="n">previous_value</span> <span class="o">=</span> <span class="n">number</span>
    <span class="k">return</span> <span class="n">max_value</span> <span class="o">*</span> <span class="n">previous_value</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">check_inputs</span><span class="p">(</span><span class="n">max_pairwise_product_take_three</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-orged31026" class="outline-2">
<h2 id="orged31026">Stress Test</h2>
<div class="outline-text-2" id="text-orged31026">
<p>
Even thought we're already passing, part of the assignment was to create a stress test to really exercise the algorithm once you have it passing.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">stress_test</span><span class="p">(</span><span class="n">implementation</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">maximum_size</span><span class="o">=</span><span class="n">MAX_INPUTS</span> <span class="p">,</span>
		<span class="n">maximum_value</span><span class="o">=</span><span class="n">MAX_VALUE</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">"""Repeatedly creates random inputs to test the implementation</span>

<span class="sd">    This compares the output of the implementation against our brute-force version</span>

<span class="sd">    Args:</span>
<span class="sd">     implementation: callable to test</span>
<span class="sd">     tag (str): something to identify the implementation</span>
<span class="sd">     maximum_size (int): the maximum number of numbers for an input</span>
<span class="sd">     maximum_value (int): the maximum value for any input</span>
<span class="sd">     iterations (int): the number of times to test (if None runs infinitely)</span>
<span class="sd">    """</span>
    <span class="n">true_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">iteration</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">increment</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">iterations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">iterations</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">iterations</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">iterations</span>
    <span class="n">max_time</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">iteration</span> <span class="o">&lt;</span> <span class="n">iterations</span><span class="p">:</span>
	<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="n">true_count</span> <span class="o">+=</span> <span class="mi">1</span>
	<span class="n">iteration</span> <span class="o">+=</span> <span class="n">increment</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"***** ({}) Trial: {} *****"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">true_count</span><span class="p">))</span>
	<span class="n">n</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">maximum_size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Input Size: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
	<span class="n">inputs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">maximum_value</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Running Brute Force"</span><span class="p">)</span>
	<span class="n">brute_start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="n">output_brute</span> <span class="o">=</span> <span class="n">max_pairwise_product_brute_jit</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Brute Force Time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">brute_start</span><span class="p">))</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Running {} implementation"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
	<span class="n">implementation_start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="n">output_implementation</span> <span class="o">=</span> <span class="n">implementation</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
	<span class="n">implementation_end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="n">implementation_elapsed</span> <span class="o">=</span> <span class="n">implementation_end</span> <span class="o">-</span> <span class="n">implementation_start</span>
	<span class="k">if</span> <span class="n">implementation_elapsed</span> <span class="o">&gt;</span> <span class="n">MAX_TIME</span><span class="p">:</span>
	    <span class="k">print</span><span class="p">(</span><span class="s2">"Error Time Exceeded: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">implementation_elapsed</span><span class="p">))</span>
	    <span class="k">break</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Implementation Time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">implementation_elapsed</span><span class="p">))</span>
	<span class="k">if</span> <span class="n">implementation_elapsed</span> <span class="o">&gt;</span> <span class="n">max_time</span><span class="p">:</span>
	    <span class="n">max_time</span> <span class="o">=</span> <span class="n">implementation_elapsed</span>
	<span class="k">if</span> <span class="n">output_brute</span> <span class="o">!=</span> <span class="n">output_implementation</span><span class="p">:</span>
	    <span class="k">print</span><span class="p">(</span><span class="s2">"error: Expected {}, Actual {}"</span><span class="p">,</span> <span class="n">output_brute</span> <span class="p">,</span> <span class="n">output_implementation</span><span class="p">)</span>
	    <span class="k">print</span><span class="p">(</span><span class="s2">"Inputs: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inputs</span><span class="p">))</span>
	    <span class="k">break</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">"Elapsed time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Max {} time: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">max_time</span><span class="p">))</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>

<div id="outline-container-org677b9cf" class="outline-2">
<h2 id="org677b9cf">Boosted Brute Force</h2>
<div class="outline-text-2" id="text-org677b9cf">
<p>
To try and get this working I'm going to use numba to (hopefully) speed it enough to make the stress test runnable.
</p>


<div class="highlight"><pre><span></span><span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">max_pairwise_product_brute_jit</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
    <span class="sd">"""Calculates the largest pairwise-product for a list</span>

<span class="sd">    Args:</span>
<span class="sd">     numbers (list): integers to check</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: largest product created from numbers</span>
<span class="sd">    """</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
    <span class="n">max_product</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">first</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">for</span> <span class="n">second</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
	    <span class="n">max_product</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_product</span><span class="p">,</span>
			      <span class="n">numbers</span><span class="p">[</span><span class="n">first</span><span class="p">]</span> <span class="o">*</span> <span class="n">numbers</span><span class="p">[</span><span class="n">second</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">max_product</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s2">"One Pass Method"</span><span class="p">)</span>
<span class="n">stress_test</span><span class="p">(</span><span class="n">max_pairwise_product_take_three</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">"One-Pass"</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgc991b68" class="outline-2">
<h2 id="orgc991b68">Using Sort</h2>
<div class="outline-text-2" id="text-orgc991b68">
<p>
Since we need the top two values we can get a more efficient algorithm by sorting the values.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">max_pairwise_product_sort</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
    <span class="sd">"""Calculates the largest pairwise-product for a list</span>

<span class="sd">    Args:</span>
<span class="sd">     numbers (list): integers to check</span>

<span class="sd">    Returns:</span>
<span class="sd">     int: largest product created from numbers</span>
<span class="sd">    """</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
    <span class="n">numbers</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">numbers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">numbers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n\n</span><span class="s2">Sort method"</span><span class="p">)</span>
<span class="n">stress_test</span><span class="p">(</span><span class="n">max_pairwise_product_sort</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">"Sort"</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-1.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents Â© 2018         <a href="mailto:necromuralist@protonmail.com">Cloistered Monkey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
